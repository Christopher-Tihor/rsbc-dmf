{"Timestamp":"2023-12-18T17:16:14.8632357-08:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-12-18T17:16:15.4847978-08:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-12-18T17:16:15.5229204-08:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-SERVICE\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"TSq7EALXSLYY7509Hxzkn7upSPYA1JKy\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-12-18T17:16:20.7924336-08:00","Level":"Fatal","MessageTemplate":"Host terminated unexpectedly","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error starting gRPC call. HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:4020) SocketException: No connection could be made because the target machine actively refused it.\", DebugException=\"System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:4020)\r\n ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)\r\n   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|277_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.AddHttp2ConnectionAsync(HttpRequestMessage request)\r\n   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.GetHttp2ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at Grpc.Net.Client.Internal.HttpClientCallInvoker.BlockingUnaryCall[TRequest,TResponse](Method`2 method, String host, CallOptions options, TRequest request)\r\n   at Grpc.Core.Interceptors.InterceptingCallInvoker.<BlockingUnaryCall>b__3_0[TRequest,TResponse](TRequest req, ClientInterceptorContext`2 ctx)\r\n   at Grpc.Core.ClientBase.ClientBaseConfiguration.ClientBaseConfigurationInterceptor.BlockingUnaryCall[TRequest,TResponse](TRequest request, ClientInterceptorContext`2 context, BlockingUnaryCallContinuation`2 continuation)\r\n   at Grpc.Core.Interceptors.InterceptingCallInvoker.BlockingUnaryCall[TRequest,TResponse](Method`2 method, String host, CallOptions options, TRequest request)\r\n   at Rsbc.Dmf.CaseManagement.Service.CaseManager.CaseManagerClient.GetToken(TokenRequest request, CallOptions options) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\obj\\Debug\\net6.0\\CmsAdapterGrpc.cs:line 690\r\n   at Rsbc.Dmf.CaseManagement.Service.CaseManager.CaseManagerClient.GetToken(TokenRequest request, Metadata headers, Nullable`1 deadline, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\obj\\Debug\\net6.0\\CmsAdapterGrpc.cs:line 679\r\n   at PidpAdapter.API.Infrastructure.CmsAdapterConfiguration.AddCmsAdapterGrpcService(IServiceCollection services, PdipadapterConfiguration config) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\CmsAdapterConfiguration.cs:line 47\r\n   at pdipadapter.Startup.ConfigureServices(IServiceCollection services) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Startup.cs:line 111\r\n   at System.RuntimeMethodHandle.InvokeMethod(Object target, Span`1& arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)\r\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.InvokeCore(Object instance, IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass9_0.<Invoke>g__Startup|0(IServiceCollection serviceCollection)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.Invoke(Object instance, IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass8_0.<Build>b__0(IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.UseStartup(Type startupType, HostBuilderContext context, IServiceCollection services, Object instance)\r\n   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.<>c__DisplayClass13_0.<UseStartup>b__0(HostBuilderContext context, IServiceCollection services)\r\n   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()\r\n   at Microsoft.Extensions.Hosting.HostBuilder.Build()\r\n   at pdipadapter.Program.Main(String[] args) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Program.cs:line 25","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
