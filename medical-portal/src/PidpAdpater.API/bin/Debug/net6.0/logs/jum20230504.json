{"Timestamp":"2023-05-04T00:09:48.2255100-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:09:55.7884440-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:09:55.8649787-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-SERVICE\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"TSq7EALXSLYY7509Hxzkn7upSPYA1JKy\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:02.8710954-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7215","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:02.8726981-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"http://localhost:5050","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:02.8751134-07:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:02.8752949-07:00","Level":"Information","MessageTemplate":"Hosting environment: {envName}","Properties":{"envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:02.8755082-07:00","Level":"Information","MessageTemplate":"Content root path: {contentRoot}","Properties":{"contentRoot":"C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:10:12.4584989-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"GET","RequestPath":"/api/contacts","StatusCode":401,"Elapsed":811.1012,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQCDQACGKBQ:00000002","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"811.1012"}]}}
{"Timestamp":"2023-05-04T00:11:10.4951165-07:00","Level":"Warning","MessageTemplate":"User {UserId} is not authorized to perform this operation","Properties":{"UserId":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","SourceContext":"PidpAdapter.API.Infrastructure.PidpAdapterControllerBase","ActionId":"2e325a47-97d1-49ae-9bf9-20700638e7e0","ActionName":"pdipadapter.Features.Users.Controllers.ContactsController.GetContacts (PidpAdapter.API)","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:11:10.6270448-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","RequestMethod":"GET","RequestPath":"/api/contacts","StatusCode":500,"Elapsed":32114.0366,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQCDQACGKBQ:00000003","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"32114.0366"}]}}
{"Timestamp":"2023-05-04T00:11:10.8021662-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:11:10.8223215-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error handler will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:11:10.8242391-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:11:10.8500968-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error page middleware will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:11:10.8608202-07:00","Level":"Error","MessageTemplate":"Connection id \"{ConnectionId}\", Request id \"{TraceIdentifier}\": An unhandled exception was thrown by the application.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)\r\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)","Properties":{"ConnectionId":"0HMQCDQACGKBQ","TraceIdentifier":"0HMQCDQACGKBQ:00000003","EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HMQCDQACGKBQ:00000003","RequestPath":"/api/contacts","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:42.9790178-07:00","Level":"Warning","MessageTemplate":"User {UserId} is not authorized to perform this operation","Properties":{"UserId":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","SourceContext":"PidpAdapter.API.Infrastructure.PidpAdapterControllerBase","ActionId":"2e325a47-97d1-49ae-9bf9-20700638e7e0","ActionName":"pdipadapter.Features.Users.Controllers.ContactsController.GetContacts (PidpAdapter.API)","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:43.0951383-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","RequestMethod":"GET","RequestPath":"/api/contacts","StatusCode":500,"Elapsed":32809.9876,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQCDQACGKBQ:00000004","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"32809.9876"}]}}
{"Timestamp":"2023-05-04T00:14:43.1368610-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:43.1512449-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error handler will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:43.1544372-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:43.1702620-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error page middleware will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:14:43.1725646-07:00","Level":"Error","MessageTemplate":"Connection id \"{ConnectionId}\", Request id \"{TraceIdentifier}\": An unhandled exception was thrown by the application.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)\r\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)","Properties":{"ConnectionId":"0HMQCDQACGKBQ","TraceIdentifier":"0HMQCDQACGKBQ:00000004","EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HMQCDQACGKBQ:00000004","RequestPath":"/api/contacts","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.3169582-07:00","Level":"Warning","MessageTemplate":"User {UserId} is not authorized to perform this operation","Properties":{"UserId":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","SourceContext":"PidpAdapter.API.Infrastructure.PidpAdapterControllerBase","ActionId":"2e325a47-97d1-49ae-9bf9-20700638e7e0","ActionName":"pdipadapter.Features.Users.Controllers.ContactsController.GetContacts (PidpAdapter.API)","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.5176948-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","RequestMethod":"GET","RequestPath":"/api/contacts","StatusCode":500,"Elapsed":110744.3489,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQCDQACGKBQ:00000005","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"110744.3489"}]}}
{"Timestamp":"2023-05-04T00:17:19.5600540-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.5761051-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error handler will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.5776484-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.5912830-07:00","Level":"Warning","MessageTemplate":"The response has already started, the error page middleware will not be executed.","Properties":{"EventId":{"Id":2,"Name":"ResponseStarted"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:17:19.5940696-07:00","Level":"Error","MessageTemplate":"Connection id \"{ConnectionId}\", Request id \"{TraceIdentifier}\": An unhandled exception was thrown by the application.","Exception":"System.InvalidCastException: Unable to cast object of type 'Microsoft.AspNetCore.Mvc.UnauthorizedResult' to type 'System.Collections.Generic.List`1[MedicalPortal.API.Features.Users.Queries.PractitionerContactQuery+Model]'.\r\n   at PidpAdapter.API.Infrastructure.PidpAdapterControllerBase.AuthorizeContactBeforeHandleAsync[TRequest,TResponse](String contactId, TRequest request) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\PidpAdapterControllerBase.cs:line 41\r\n   at pdipadapter.Features.Users.Controllers.ContactsController.GetContacts(Query query) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\ContactsController.cs:line 44\r\n   at lambda_method118(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)\r\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)","Properties":{"ConnectionId":"0HMQCDQACGKBQ","TraceIdentifier":"0HMQCDQACGKBQ:00000005","EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HMQCDQACGKBQ:00000005","RequestPath":"/api/contacts","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-05-04T00:19:26.3280417-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"1b001321-9cf7-4e0a-813a-7ec1a0ffe941","RequestMethod":"GET","RequestPath":"/api/contacts","StatusCode":200,"Elapsed":40899.0666,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQCDQACGKBQ:00000006","ConnectionId":"0HMQCDQACGKBQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"40899.0666"}]}}
