{"Timestamp":"2023-04-20T00:05:02.9141869-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:05.1255093-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:05.1979063-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-WEBAPP\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca/api\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"cbfc39c5-3814-44cd-a5f7-36194f7281f9\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:11.8502604-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7215","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:11.8549339-07:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:11.8552262-07:00","Level":"Information","MessageTemplate":"Hosting environment: {envName}","Properties":{"envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:05:11.8554308-07:00","Level":"Information","MessageTemplate":"Content root path: {contentRoot}","Properties":{"contentRoot":"C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:06:59.4972132-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":401,"Elapsed":959.1274,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1DMAS2GFI:00000002","ConnectionId":"0HMQ1DMAS2GFI","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"959.1274"}]}}
{"Timestamp":"2023-04-20T00:09:11.4312839-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Cancelled\", Detail=\"\", DebugException=\"System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.\r\n ---> System.TimeoutException: The operation was canceled.\r\n ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.\r\n   at System.Net.Http.Http2Connection.Http2Stream.<>c.<WaitForDataAsync>b__80_0(Object s, CancellationToken cancellationToken)\r\n   at System.Threading.CancellationTokenSource.Invoke(Delegate d, Object state, CancellationTokenSource source)\r\n   at System.Threading.CancellationTokenSource.CallbackNode.ExecuteCallback()\r\n   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.NotifyCancellation(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.TimerCallback(Object state)\r\n   at System.Threading.TimerQueueTimer.CallCallback(Boolean isThreadPool)\r\n   at System.Threading.TimerQueueTimer.Fire(Boolean isThreadPool)\r\n   at System.Threading.TimerQueue.FireNextTimers()\r\n   at System.Threading.TimerQueue.AppDomainTimerCallback(Int32 id)\r\n   at System.Threading.UnmanagedThreadPoolWorkItem.System.Threading.IThreadPoolWorkItem.Execute()\r\n   at System.Threading.ThreadPoolWorkQueue.Dispatch()\r\n   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()\r\n   at System.Threading.Thread.StartCallback()\r\n--- End of stack trace from previous location ---\r\n   at System.Net.Http.Http2Connection.Http2Stream.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)\r\n   at System.Net.Http.Http2Connection.Http2Stream.ReadResponseHeadersAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method120(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":500,"Elapsed":105021.7868,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1DMAS2GFI:00000003","ConnectionId":"0HMQ1DMAS2GFI","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"105021.7868"}]}}
{"Timestamp":"2023-04-20T00:09:11.4965082-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Cancelled\", Detail=\"\", DebugException=\"System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.\r\n ---> System.TimeoutException: The operation was canceled.\r\n ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.\r\n   at System.Net.Http.Http2Connection.Http2Stream.<>c.<WaitForDataAsync>b__80_0(Object s, CancellationToken cancellationToken)\r\n   at System.Threading.CancellationTokenSource.Invoke(Delegate d, Object state, CancellationTokenSource source)\r\n   at System.Threading.CancellationTokenSource.CallbackNode.ExecuteCallback()\r\n   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.NotifyCancellation(Boolean throwOnFirstException)\r\n   at System.Threading.CancellationTokenSource.TimerCallback(Object state)\r\n   at System.Threading.TimerQueueTimer.CallCallback(Boolean isThreadPool)\r\n   at System.Threading.TimerQueueTimer.Fire(Boolean isThreadPool)\r\n   at System.Threading.TimerQueue.FireNextTimers()\r\n   at System.Threading.TimerQueue.AppDomainTimerCallback(Int32 id)\r\n   at System.Threading.UnmanagedThreadPoolWorkItem.System.Threading.IThreadPoolWorkItem.Execute()\r\n   at System.Threading.ThreadPoolWorkQueue.Dispatch()\r\n   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()\r\n   at System.Threading.Thread.StartCallback()\r\n--- End of stack trace from previous location ---\r\n   at System.Net.Http.Http2Connection.Http2Stream.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)\r\n   at System.Net.Http.Http2Connection.Http2Stream.ReadResponseHeadersAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method120(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQ1DMAS2GFI:00000003","RequestPath":"/contact/request","ConnectionId":"0HMQ1DMAS2GFI","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:09:11.6992218-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/error","StatusCode":500,"Elapsed":177.7211,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1DMAS2GFI:00000003","ConnectionId":"0HMQ1DMAS2GFI","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"177.7211"}]}}
{"Timestamp":"2023-04-20T00:20:15.7245307-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:17.0369673-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:17.1632820-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-WEBAPP\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca/api\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"cbfc39c5-3814-44cd-a5f7-36194f7281f9\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:24.9677911-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7215","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:24.9720121-07:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:24.9722786-07:00","Level":"Information","MessageTemplate":"Hosting environment: {envName}","Properties":{"envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:20:24.9724367-07:00","Level":"Information","MessageTemplate":"Content root path: {contentRoot}","Properties":{"contentRoot":"C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:21:07.3388326-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unknown\", Detail=\"Exception was thrown by handler. DataServiceRequestException: An error occurred while processing this request. DataServiceClientException: --batchresponse_fbec2c65-fe6e-49ba-9bb1-478ea6aa6b95\r\nContent-Type: multipart/mixed; boundary=changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6\r\n\r\n--changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary\r\nContent-ID: 3\r\n\r\nHTTP/1.1 412 Precondition Failed\r\nREQ_ID: 750b17ed-bd57-4fa7-8368-6e077196843c\r\nContent-Type: application/json; odata.metadata=minimal; charset=utf-8\r\nOData-Version: 4.0\r\n\r\n{\"error\":{\"code\":\"0x80040237\",\"message\":\"A record with matching key values already exists.\",\"innererror\":{\"message\":\"Cannot insert duplicate key.\",\"type\":\"System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=9.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]\",\"stacktrace\":\"   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.CreateInternal(Entity entity, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType, Boolean checkAdminMode, Dictionary`2 optionalParameters)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataExecutionContext.CreateOrganizationResponse(Entity entity)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataServiceDataProvider.CreateEdmEntity(CrmODataExecutionContext context, String edmEntityName, EdmEntityObject entityObject, Boolean isUpsert)\\r\\n   at Microsoft.Crm.Extensibility.OData.EntityController.PostEntitySetImplementation(String& entitySetName, EdmEntityObject entityObject)\\r\\n   at Microsoft.PowerApps.CoreFramework.ActivityLoggerExtensions.Execute[TResult](ILogger logger, EventId eventId, ActivityType activityType, Func`1 func)\\r\\n   at Microsoft.Xrm.Telemetry.XrmTelemetryExtensions.Execute[TResult](ILogger logger, XrmTelemetryActivityType activityType, Func`1 func)\\r\\n   at lambda_method(Closure , Object , Object[] )\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()\"}}}\r\n--changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6--\r\n--batchresponse_fbec2c65-fe6e-49ba-9bb1-478ea6aa6b95--\r\n\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":500,"Elapsed":26626.8094,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1DUQVIHUG:00000002","ConnectionId":"0HMQ1DUQVIHUG","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"26626.8094"}]}}
{"Timestamp":"2023-04-20T00:21:07.4764875-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unknown\", Detail=\"Exception was thrown by handler. DataServiceRequestException: An error occurred while processing this request. DataServiceClientException: --batchresponse_fbec2c65-fe6e-49ba-9bb1-478ea6aa6b95\r\nContent-Type: multipart/mixed; boundary=changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6\r\n\r\n--changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary\r\nContent-ID: 3\r\n\r\nHTTP/1.1 412 Precondition Failed\r\nREQ_ID: 750b17ed-bd57-4fa7-8368-6e077196843c\r\nContent-Type: application/json; odata.metadata=minimal; charset=utf-8\r\nOData-Version: 4.0\r\n\r\n{\"error\":{\"code\":\"0x80040237\",\"message\":\"A record with matching key values already exists.\",\"innererror\":{\"message\":\"Cannot insert duplicate key.\",\"type\":\"System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=9.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]\",\"stacktrace\":\"   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.CreateInternal(Entity entity, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType, Boolean checkAdminMode, Dictionary`2 optionalParameters)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataExecutionContext.CreateOrganizationResponse(Entity entity)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataServiceDataProvider.CreateEdmEntity(CrmODataExecutionContext context, String edmEntityName, EdmEntityObject entityObject, Boolean isUpsert)\\r\\n   at Microsoft.Crm.Extensibility.OData.EntityController.PostEntitySetImplementation(String& entitySetName, EdmEntityObject entityObject)\\r\\n   at Microsoft.PowerApps.CoreFramework.ActivityLoggerExtensions.Execute[TResult](ILogger logger, EventId eventId, ActivityType activityType, Func`1 func)\\r\\n   at Microsoft.Xrm.Telemetry.XrmTelemetryExtensions.Execute[TResult](ILogger logger, XrmTelemetryActivityType activityType, Func`1 func)\\r\\n   at lambda_method(Closure , Object , Object[] )\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()\"}}}\r\n--changesetresponse_5855c4cb-a5df-4662-8935-1e5f9036d5b6--\r\n--batchresponse_fbec2c65-fe6e-49ba-9bb1-478ea6aa6b95--\r\n\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQ1DUQVIHUG:00000002","RequestPath":"/contact/request","ConnectionId":"0HMQ1DUQVIHUG","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:21:07.6695636-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/error","StatusCode":500,"Elapsed":173.9474,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1DUQVIHUG:00000002","ConnectionId":"0HMQ1DUQVIHUG","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"173.9474"}]}}
{"Timestamp":"2023-04-20T00:22:23.4683980-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:24.9677811-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:25.0712695-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-WEBAPP\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca/api\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"cbfc39c5-3814-44cd-a5f7-36194f7281f9\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:31.7875928-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7215","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:31.7932496-07:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:31.7935383-07:00","Level":"Information","MessageTemplate":"Hosting environment: {envName}","Properties":{"envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:22:31.7937386-07:00","Level":"Information","MessageTemplate":"Content root path: {contentRoot}","Properties":{"contentRoot":"C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:23:40.0013225-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error starting gRPC call. HttpRequestException: An error occurred while sending the request. IOException: The request was aborted. IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.. SocketException: An existing connection was forcibly closed by the remote host.\", DebugException=\"System.Net.Http.HttpRequestException: An error occurred while sending the request.\r\n ---> System.IO.IOException: The request was aborted.\r\n ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..\r\n ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)\r\n   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)\r\n   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)\r\n   at System.Net.Http.Http2Connection.ProcessIncomingFramesAsync()\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.Http2Connection.ThrowRequestAborted(Exception innerException)\r\n   at System.Net.Http.Http2Connection.Http2Stream.CheckResponseBodyState()\r\n   at System.Net.Http.Http2Connection.Http2Stream.TryEnsureHeaders()\r\n   at System.Net.Http.Http2Connection.Http2Stream.ReadResponseHeadersAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":500,"Elapsed":32691.6874,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E00PG0LQ:00000002","ConnectionId":"0HMQ1E00PG0LQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"32691.6874"}]}}
{"Timestamp":"2023-04-20T00:23:40.0527704-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error starting gRPC call. HttpRequestException: An error occurred while sending the request. IOException: The request was aborted. IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.. SocketException: An existing connection was forcibly closed by the remote host.\", DebugException=\"System.Net.Http.HttpRequestException: An error occurred while sending the request.\r\n ---> System.IO.IOException: The request was aborted.\r\n ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..\r\n ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)\r\n   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](TIOAdapter adapter)\r\n   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](TIOAdapter adapter, Memory`1 buffer)\r\n   at System.Net.Http.Http2Connection.ProcessIncomingFramesAsync()\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.Http2Connection.ThrowRequestAborted(Exception innerException)\r\n   at System.Net.Http.Http2Connection.Http2Stream.CheckResponseBodyState()\r\n   at System.Net.Http.Http2Connection.Http2Stream.TryEnsureHeaders()\r\n   at System.Net.Http.Http2Connection.Http2Stream.ReadResponseHeadersAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.Http2Connection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQ1E00PG0LQ:00000002","RequestPath":"/contact/request","ConnectionId":"0HMQ1E00PG0LQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:23:40.2270714-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/error","StatusCode":500,"Elapsed":165.4589,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E00PG0LQ:00000002","ConnectionId":"0HMQ1E00PG0LQ","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"165.4589"}]}}
{"Timestamp":"2023-04-20T00:36:39.3847923-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:36:43.0665301-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:36:43.1432104-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-WEBAPP\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca/api\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"cbfc39c5-3814-44cd-a5f7-36194f7281f9\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:36:49.8272107-07:00","Level":"Fatal","MessageTemplate":"Host terminated unexpectedly","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error starting gRPC call. HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:4020) SocketException: No connection could be made because the target machine actively refused it.\", DebugException=\"System.Net.Http.HttpRequestException: No connection could be made because the target machine actively refused it. (localhost:4020)\r\n ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)\r\n   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)\r\n   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|277_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\r\n   --- End of inner exception stack trace ---\r\n   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.AddHttp2ConnectionAsync(HttpRequestMessage request)\r\n   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.GetHttp2ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)\r\n   at Grpc.Net.Client.Internal.GrpcCall`2.RunCall(HttpRequestMessage request, Nullable`1 timeout)\")\r\n   at Grpc.Net.Client.Internal.HttpClientCallInvoker.BlockingUnaryCall[TRequest,TResponse](Method`2 method, String host, CallOptions options, TRequest request)\r\n   at Grpc.Core.Interceptors.InterceptingCallInvoker.<BlockingUnaryCall>b__3_0[TRequest,TResponse](TRequest req, ClientInterceptorContext`2 ctx)\r\n   at Grpc.Core.ClientBase.ClientBaseConfiguration.ClientBaseConfigurationInterceptor.BlockingUnaryCall[TRequest,TResponse](TRequest request, ClientInterceptorContext`2 context, BlockingUnaryCallContinuation`2 continuation)\r\n   at Grpc.Core.Interceptors.InterceptingCallInvoker.BlockingUnaryCall[TRequest,TResponse](Method`2 method, String host, CallOptions options, TRequest request)\r\n   at Rsbc.Dmf.CaseManagement.Service.CaseManager.CaseManagerClient.GetToken(TokenRequest request, CallOptions options) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\obj\\Debug\\net6.0\\CmsAdapterGrpc.cs:line 690\r\n   at Rsbc.Dmf.CaseManagement.Service.CaseManager.CaseManagerClient.GetToken(TokenRequest request, Metadata headers, Nullable`1 deadline, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\obj\\Debug\\net6.0\\CmsAdapterGrpc.cs:line 679\r\n   at PidpAdapter.API.Infrastructure.CmsAdapterConfiguration.AddCmsAdapterGrpcService(IServiceCollection services, PdipadapterConfiguration config) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Infrastructure\\CmsAdapterConfiguration.cs:line 47\r\n   at pdipadapter.Startup.ConfigureServices(IServiceCollection services) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Startup.cs:line 127\r\n   at System.RuntimeMethodHandle.InvokeMethod(Object target, Span`1& arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)\r\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.InvokeCore(Object instance, IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass9_0.<Invoke>g__Startup|0(IServiceCollection serviceCollection)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.Invoke(Object instance, IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.ConfigureServicesBuilder.<>c__DisplayClass8_0.<Build>b__0(IServiceCollection services)\r\n   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.UseStartup(Type startupType, HostBuilderContext context, IServiceCollection services, Object instance)\r\n   at Microsoft.AspNetCore.Hosting.GenericWebHostBuilder.<>c__DisplayClass13_0.<UseStartup>b__0(HostBuilderContext context, IServiceCollection services)\r\n   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()\r\n   at Microsoft.Extensions.Hosting.HostBuilder.Build()\r\n   at pdipadapter.Program.Main(String[] args) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Program.cs:line 26","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:47.2696162-07:00","Level":"Information","MessageTemplate":"Starting web host","Properties":{"MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:48.3000799-07:00","Level":"Information","MessageTemplate":"### App Version:{0} ###","Properties":{"0":"1.0.0.0","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:48.3814210-07:00","Level":"Information","MessageTemplate":"### Pidp Adapter Configuration:{0} ###","Properties":{"0":"{\"AddressAutocompleteClient\":{\"ApiKey\":\"\",\"Url\":\"\"},\"ConnectionStrings\":{\"JumDatabase\":\"\"},\"ChesClient\":{\"Enabled\":false,\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"TokenUrl\":\"\"},\"JustinParticipantClient\":{\"Url\":\"\"},\"KafkaCluster\":{\"Url\":\"\",\"ClientId\":\"\",\"ClientSecret\":\"\",\"BoostrapServers\":\"\",\"TopicName\":\"\"},\"Keycloak\":{\"RealmUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications\",\"WellKnownConfig\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/.well-known/openid-configuration\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\",\"AdministrationUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/admin/realms/moh_applications\",\"AdministrationClientId\":\"DMFT-WEBAPP\",\"AdministrationClientSecret\":\"\\u003Credacted\\u003E\",\"HcimClientId\":\"HCIMWEB\"},\"MailServer\":{\"Url\":\"\",\"Port\":0},\"CMS\":{\"SERVER_URL\":\"https://localhost:4020\",\"CLIENTSECRET\":\"wFD{PXu\\u002B].!\\u00229Nk}\",\"VALIDATESERVERCERTIFICATE\":false},\"PidpEndorsementAPI\":{\"Url\":\"https://test.healthprovideridentityportal.gov.bc.ca/api\",\"ClientId\":\"DMFT-SERVICE\",\"ClientSecret\":\"cbfc39c5-3814-44cd-a5f7-36194f7281f9\",\"TokenUrl\":\"https://common-logon-test.hlth.gov.bc.ca/auth/realms/moh_applications/protocol/openid-connect/token\"}}","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:53.3532830-07:00","Level":"Information","MessageTemplate":"Now listening on: {address}","Properties":{"address":"https://localhost:7215","EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:53.3575051-07:00","Level":"Information","MessageTemplate":"Application started. Press Ctrl+C to shut down.","Properties":{"SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:53.3578564-07:00","Level":"Information","MessageTemplate":"Hosting environment: {envName}","Properties":{"envName":"Development","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:38:53.3580475-07:00","Level":"Information","MessageTemplate":"Content root path: {contentRoot}","Properties":{"contentRoot":"C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API","SourceContext":"Microsoft.Hosting.Lifetime","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:39:47.9395291-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unknown\", Detail=\"Exception was thrown by handler. DataServiceRequestException: An error occurred while processing this request. DataServiceClientException: --batchresponse_e62067c5-29f4-4c28-aa10-cbd9ee95f98b\r\nContent-Type: multipart/mixed; boundary=changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702\r\n\r\n--changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary\r\nContent-ID: 3\r\n\r\nHTTP/1.1 412 Precondition Failed\r\nREQ_ID: 69fdb445-7e89-4c47-98c5-ef60a0c01678\r\nContent-Type: application/json; odata.metadata=minimal; charset=utf-8\r\nOData-Version: 4.0\r\n\r\n{\"error\":{\"code\":\"0x80040237\",\"message\":\"A record with matching key values already exists.\",\"innererror\":{\"message\":\"Cannot insert duplicate key.\",\"type\":\"System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=9.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]\",\"stacktrace\":\"   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.CreateInternal(Entity entity, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType, Boolean checkAdminMode, Dictionary`2 optionalParameters)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataExecutionContext.CreateOrganizationResponse(Entity entity)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataServiceDataProvider.CreateEdmEntity(CrmODataExecutionContext context, String edmEntityName, EdmEntityObject entityObject, Boolean isUpsert)\\r\\n   at Microsoft.Crm.Extensibility.OData.EntityController.PostEntitySetImplementation(String& entitySetName, EdmEntityObject entityObject)\\r\\n   at Microsoft.PowerApps.CoreFramework.ActivityLoggerExtensions.Execute[TResult](ILogger logger, EventId eventId, ActivityType activityType, Func`1 func)\\r\\n   at Microsoft.Xrm.Telemetry.XrmTelemetryExtensions.Execute[TResult](ILogger logger, XrmTelemetryActivityType activityType, Func`1 func)\\r\\n   at lambda_method(Closure , Object , Object[] )\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()\"}}}\r\n--changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702--\r\n--batchresponse_e62067c5-29f4-4c28-aa10-cbd9ee95f98b--\r\n\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":500,"Elapsed":46474.8769,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E959HUN6:00000002","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"46474.8769"}]}}
{"Timestamp":"2023-04-20T00:39:48.0654949-07:00","Level":"Error","MessageTemplate":"An unhandled exception has occurred while executing the request.","Exception":"Grpc.Core.RpcException: Status(StatusCode=\"Unknown\", Detail=\"Exception was thrown by handler. DataServiceRequestException: An error occurred while processing this request. DataServiceClientException: --batchresponse_e62067c5-29f4-4c28-aa10-cbd9ee95f98b\r\nContent-Type: multipart/mixed; boundary=changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702\r\n\r\n--changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702\r\nContent-Type: application/http\r\nContent-Transfer-Encoding: binary\r\nContent-ID: 3\r\n\r\nHTTP/1.1 412 Precondition Failed\r\nREQ_ID: 69fdb445-7e89-4c47-98c5-ef60a0c01678\r\nContent-Type: application/json; odata.metadata=minimal; charset=utf-8\r\nOData-Version: 4.0\r\n\r\n{\"error\":{\"code\":\"0x80040237\",\"message\":\"A record with matching key values already exists.\",\"innererror\":{\"message\":\"Cannot insert duplicate key.\",\"type\":\"System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=9.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]\",\"stacktrace\":\"   at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.CreateInternal(Entity entity, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType, Boolean checkAdminMode, Dictionary`2 optionalParameters)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataExecutionContext.CreateOrganizationResponse(Entity entity)\\r\\n   at Microsoft.Crm.Extensibility.OData.CrmODataServiceDataProvider.CreateEdmEntity(CrmODataExecutionContext context, String edmEntityName, EdmEntityObject entityObject, Boolean isUpsert)\\r\\n   at Microsoft.Crm.Extensibility.OData.EntityController.PostEntitySetImplementation(String& entitySetName, EdmEntityObject entityObject)\\r\\n   at Microsoft.PowerApps.CoreFramework.ActivityLoggerExtensions.Execute[TResult](ILogger logger, EventId eventId, ActivityType activityType, Func`1 func)\\r\\n   at Microsoft.Xrm.Telemetry.XrmTelemetryExtensions.Execute[TResult](ILogger logger, XrmTelemetryActivityType activityType, Func`1 func)\\r\\n   at lambda_method(Closure , Object , Object[] )\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)\\r\\n   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()\\r\\n--- End of stack trace from previous location where exception was thrown ---\\r\\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\\r\\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\\r\\n   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()\"}}}\r\n--changesetresponse_b0399c2d-aa9c-481c-8a5e-7c5ca8c71702--\r\n--batchresponse_e62067c5-29f4-4c28-aa10-cbd9ee95f98b--\r\n\")\r\n   at MedicalPortal.API.Features.Users.Commands.CreateUser.CommandHandler.Handle(Command command, CancellationToken cancellationToken) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Commands\\CreateUser.cs:line 62\r\n   at pdipadapter.PipelineBehaviours.ValidationBehaviour`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\PipelineBehaviours\\ValidationBehvaviour.cs:line 23\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)\r\n   at pdipadapter.Features.Users.Controllers.UsersController.CreateContact(Command command) in C:\\Users\\sookeke\\rsbc-dmf\\medical-portal\\src\\PidpAdpater.API\\Features\\Users\\Controllers\\UsersController.cs:line 33\r\n   at lambda_method117(Closure , Object )\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)\r\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\r\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\n   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)\r\n   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)\r\n   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)","Properties":{"EventId":{"Id":1,"Name":"UnhandledException"},"SourceContext":"Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware","RequestId":"0HMQ1E959HUN6:00000002","RequestPath":"/contact/request","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"}}
{"Timestamp":"2023-04-20T00:39:48.3382133-07:00","Level":"Error","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/error","StatusCode":500,"Elapsed":242.3364,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E959HUN6:00000002","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"242.3364"}]}}
{"Timestamp":"2023-04-20T01:09:49.1161261-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":401,"Elapsed":331.4205,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E959HUN6:00000003","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"331.4205"}]}}
{"Timestamp":"2023-04-20T01:23:26.5531444-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":401,"Elapsed":88.779,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E959HUN6:00000004","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"88.7790"}]}}
{"Timestamp":"2023-04-20T06:49:07.9895758-07:00","Level":"Information","MessageTemplate":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","Properties":{"User":"73b5daa2-fa32-49f8-a87c-cee520610298","RequestMethod":"POST","RequestPath":"/contact/request","StatusCode":200,"Elapsed":29142.5141,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HMQ1E959HUN6:00000005","ConnectionId":"0HMQ1E959HUN6","MachineName":"DH401404","Assembly":"PidpAdapter.API","Version":"1.0.0.0"},"Renderings":{"Elapsed":[{"Format":"0.0000","Rendering":"29142.5141"}]}}
